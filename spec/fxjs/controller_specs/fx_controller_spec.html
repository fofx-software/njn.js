<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>fxjs controller acceptance tests</title>

  <!--fxjs-->
  <script type="text/javascript" src="../../../fx.js"></script>
  <script type="text/javascript" src="../../../fx_model.js"></script>
  <script type="text/javascript" src="../../../fx_collection.js"></script>
  <script type="text/javascript" src="../../../fx_controller.js"></script>
  <script type="text/javascript" src="../../../fx_router.js"></script>

  <!--jasmine-->
  <link rel="shortcut icon" type="image/png" href="../../jasmine/lib/jasmine-2.2.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="../../jasmine/lib/jasmine-2.2.0/jasmine.css">
  <script type="text/javascript" src="../../jasmine/lib/jasmine-2.2.0/jasmine.js"></script>
  <script type="text/javascript" src="../../jasmine/lib/jasmine-2.2.0/jasmine-html.js"></script>
  <script type="text/javascript" src="../../jasmine/lib/jasmine-2.2.0/boot.js"></script>
</head>
<body>
  <div fx-controller="processText" id="process-text">
    {{ownText1}}
    <p>{{textString}}</p>
    <p>{{textFromFunction}}</p>
    <p>{{testArguments}}</p>
    <p>this text is {{embeddedIn}} other text</p>
    <p>this text {{contains}} multiple {{interpolated}} segments</p>
    <p class="curr-element">{{testCurrElement}}</p>
    {{ownTextInner}}
    <p>{{propertyWithQuestionMark?}}</p>
    <p>{{!propertyWithBang}}</p>
    <p><span><span>{{grandchildText}}</span></span></p>
    <p>{{ withLeadingSpace}}</p>
    <p>{{withTrailingSpace }}</p>
    {{ownText2}}
  </div>
<!--

end processText

-->
  <div fx-controller="configureAttribute" id="configure-attribute" fx-attr-name="result of {{ownName}}">
    <div fx-attr-class="{{testArguments}}"></div>
    <div class="hide-me" fx-attr-style="{{useCurrElement}}"></div>
    <div class="overridden" fx-attr-class="{{overrideClass}}"></div>
    <div fx-attr-class="{{overrideClass}}" class="overridden"></div>
    <div fx-attr-class="{{firstTwoClasses}} {{thirdClass}}"></div>
    <div>{{processText1}}<span fx-attr-name="in the {{position}}">{{processInnerText}}</span>{{processText2}}</div>
  </div>
<!--

end fx-attr-*

-->

<!-- fx-data-* -->

  <div fx-controller="toggleClasses" fx-toggle-class="trueClass" id="toggle-classes">
    <ul fx-toggle-class="trueClass">
      <li fx-toggle-class="falseClass"></li>
      <li fx-toggle-class="undefinedClass"></li>
      <li fx-toggle-class="noArgs"></li>
      <li fx-toggle-class="getTrue"></li>
      <li fx-toggle-class="useCurrElem" name="use-curr-elem"></li>
      <li class="prior-class" fx-toggle-class="trueClass"></li>
      <li fx-toggle-class="trueClass" class="prior-class"></li>
      <li class="prior-class" fx-toggle-class="falseClass"></li>
      <li fx-toggle-class="trueClass getTrue"></li>
      <li class="prior-class" fx-toggle-class="trueClass getTrue"></li>
      <li fx-toggle-class="trueClass noArgs getTrue"></li>
      <li class="prior-class" fx-toggle-class="trueClass noArgs getTrue"></li>
      <li class="prior-class" fx-toggle-class="noArgs falseClass"></li>
      <li fx-toggle-class="getObject"></li>
      <li fx-attr-name="my name is {{getName}}" fx-toggle-class="trueClass falseClass">{{myText}}</li>
    </ul>
  </div>
<!--

end fx-toggle-class

-->
  <div fx-controller="toggleDisplay" id="toggle-display">
    <div fx-toggle-display="trueProperty"></div>
    <div fx-toggle-display="truthyProperty"></div>
    <div fx-toggle-display="falseProperty"></div>
    <div fx-toggle-display="falseyProperty"></div>
    <div fx-toggle-display="callThis"></div>
    <div fx-toggle-display="noArgs"></div>
    <div id="use-curr-element" fx-toggle-display="useCurrElement"></div>
    <div fx-toggle-display="notFound"></div>
    <div fx-toggle-display="!falseProperty"></div>
    <div fx-toggle-display="falseProperty falseyProperty trueProperty"></div>
    <div fx-toggle-display="falseProperty falseyProperrty !trueProperty"></div>
    <div fx-toggle-display="falseProperty falseyProperty" fx-toggle-class="trueProperty noArgs" fx-attr-name='{{myName}}'>{{myText}}</div>
  </div>
<!--

end fx-toggle-display

-->
  <div fx-controller="addEventListeners" id="add-event-listeners">
    <p fx-on="click:handleClick"></p>
    <p fx-on="click: handleClick"></p>
    <p fx-on="click:handleClick;"></p>
    <p fx-on="click:boolProp"></p>
    <p fx-on="keypress: noArgs"></p>
    <p fx-on="keypress:setCurrElement" id="curr-element"></p>
    <p fx-on="click:handleClick;keypress:setCurrElement" id="abc"></p>
    <p fx-on="click:handleClick, setCurrElement" id="123"></p>
    <p fx-on="click,keypress:boolProp;"></p>
    <p fx-on="click, keypress: boolProp, increment;"></p>
    <p fx-on="click:setCurrElement; keypress: handleClick, increment;mouseover,mouseout:increment; keydown, keyup:boolProp, increment" id="combineAll"></p>
  </div>
<!--

end fx-on

-->
  <div fx-controller="checkCheckbox" id="check-checkbox">
    <ul>
      <li><input type="checkbox" fx-checked="trueProp"></li>
      <li><input type="checkbox" fx-checked="truthyProp"></li>
      <li><input type="checkbox" fx-checked="funcProp"></li>
      <li><input type="checkbox" checked fx-checked="funcArgs"></li>
      <li><input type="checkbox" checked fx-checked="falseProp"></li>
      <li><input type="checkbox" checked fx-checked="falseyProp"></li>
    </ul>
  </div>
<!--

end fx-checked

-->
  <div fx-controller="forEach" id="for-each">
    <ul>
      <li fx-foreach="arrayProp" class="array-prop"></li>
    </ul>
    <div fx-foreach="arrayProp" class="repeat-div" fx-attr-id="repeat-div-{{getCount}}" fx-attr-name="my-name-is-{{name}}">
      {{name}}
    </div>
    <div fx-foreach="arrayProp" name="array-of-arrays" class="array-of-arrays">
      {{getOuterText}}
      <div fx-foreach="objects" fx-attr-id="{{name}}'s-object-{{num}}" class="inner-div" fx-attr-name="{{getInnerName}}">
        {{getInnerText}}
      </div>
      {{getOuterText}}
    </div>
    <div fx-foreach="collectionProp" name="array-of-arrays" class="collection-of-collections">
      {{getOuterText}}
      <div fx-foreach="objects" fx-attr-id="{{name}}'s-object-{{num}}" class="inner-div" fx-attr-name="{{getInnerName}}">
        {{getInnerText}}
      </div>
      {{getOuterText}}
    </div>
    <div fx-foreach="arrayProp" class="array-filter-func" fx-filter="filterArray"></div>
    <div fx-foreach="arrayProp" class="array-filter-undefined" fx-filter="undefinedFilter"></div>
    <div fx-foreach="arrayProp" class="array-filter-nonfunc" fx-filter="nonFuncFilter"></div>
    <div fx-foreach="arrayProp" class="array-sort-func">
      <p fx-foreach="objects" fx-sort="sortArray">{{num}}</p>
    </div>
    <div fx-foreach="arrayProp" class="array-sort-undefined">
      <p fx-foreach="objects" fx-sort="sortUndefined">{{num}}</p>
    </div>
    <div fx-foreach="arrayProp" class="array-sort-nonfunc">
      <p fx-foreach="objects" fx-sort="sortNonFunc">{{num}}</p>
    </div>
    <div fx-foreach="collectionProp" class="test-scope" fx-scope="pluralOnly">
      <p fx-foreach="objects" fx-scope="greaterThan0"></p>
    </div>
    <div fx-foreach="collectionProp" class="test-filter" fx-filter="filterPluralOnly">
      <p fx-foreach="objects" class="filter-bool" fx-filter="num"></p>
      <p fx-foreach="objects" class="filter-func" fx-filter="filterMe"></p>
      <p fx-foreach="objects" class="filter-undefined" fx-filter="filterNot"></p>
    </div>
    <div fx-foreach="collectionProp" class="test-sort" fx-sort="name" fx-attr-name="{{name}}">
      <p fx-foreach="objects" class="sort-outer-func" fx-sort="reverseNum">{{num}}</p>
      <p fx-foreach="objects" class="sort-inner-func" fx-sort="sortMe">{{num}}</p>
      <p fx-foreach="objects" class="sort-undefined" fx-sort="sortNot">{{num}}</p>
    </div>
    <div fx-foreach="collectionProp" class="filter-sort" fx-filter="filterPluralOnly" fx-sort="name">
      {{name}}
    </div>
    <div fx-foreach="collectionProp" class="scope-filter" fx-scope="pluralOnly" fx-filter="name"></div>
    <div fx-foreach="collectionProp" class="undefined-filter" fx-filter="noProp"></div>
    <div fx-foreach="collectionProp" class="negated-filter">
      <p fx-foreach="objects" fx-filter="!num"></p>
    </div>
    <div fx-foreach="noList" class="no-list"></div>
    <div fx-foreach="nonFuncFilter" class="non-func-filter"></div>
    <div fx-foreach="arrayMask" class="array-mask">
      <p fx-foreach="arrayMask"></p>
    </div>
  </div>
<!--

end fx-foreach

-->
  <div fx-controller="context" id="context">
    <span fx-context="object1" fx-attr-name="my-name-is-{{name}}">{{name}}</span>
    <p fx-context="object1">
      <span fx-context="object2" fx-attr-name="{{getName}}">
        My name is {{name2}} and I belong to {{name}}
      </span>
    </p>
    <div fx-foreach="array1" class="array-1">
      <div fx-context="object1">
        <p fx-foreach="array2" class="array-2">
          <span fx-context="object2">{{testArgs}}</span>
        </p>
      </div>
    </div>
    <div fx-context="objectMask" class="object-mask">
      {{name}}
      <div fx-context="objectMask">{{name}}</div>
      {{name}}
    </div>
    <div fx-context="noProp"></div>
  </div>
<!--

end fx-context

-->
  <div fx-controller="fxFilter" id="fx-filter">
    <p fx-context="arrayProp" fx-attr-name="{{length}}" fx-filter="over3">
      {{length}}
      <span fx-attr-class="{{length}}"></span>
    </p>
    <p fx-context="objWithArray">
      <span fx-context="arrayProp">
        <b fx-filter="over3">{{length}}</b>
      </span>
    </p>
    <p fx-foreach="arrayOfArrays" fx-filter="moreThan1" class="array-of-arrays">
      <span fx-filter="greaterThan2">{{length}}</span>
    </p>
    <!--many of these are dubious. should they raise exceptions instead?-->
    <p fx-context="noProp" fx-filter="greaterThan2"></p>
    <p fx-context="objWithArray" fx-filter="greaterThan2"></p>
    <p fx-context=arrayProp" fx-filter="noProp">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="boolProp">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="noProp">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="over2this">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="over2arg">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="doStuff">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="boolProp1">{{length}}</p>
    <p fx-context="collectionProp" fx-filter="boolProp2">{{length}}</p>
  </div>
<!--

end fx-filter

-->
<!--

end fx-sort

-->
  <div fx-controller="watch" id="watch" fx-attr-name="{{name}}">
    
  </div>
  <script type="text/javascript" src="controller_spec_setup.js"></script>
  <script type="text/javascript" src="fx_controller_spec.js"></script>
</body>
</html>
